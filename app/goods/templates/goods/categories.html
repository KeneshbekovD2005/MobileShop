{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<style>
    /* Mobile-first responsive styles */
    .btn {
        display: inline-block;
        padding: 10px 20px;
        font-size: 16px;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        border-radius: 50px;
        background-color: #007bff;
        color: white;
        transition: background-color 0.3s, transform 0.3s;
        width: 100%;
        margin-bottom: 10px;
    }

    @media (min-width: 576px) {
        .btn {
            width: auto;
            margin-bottom: 0;
        }
    }

    .btn:hover {
        background-color: #0056b3;
        transform: scale(1.05);
    }

    .btn:focus {
        outline: none;
    }

    .btn-info {
        background-color: #17a2b8;
    }

    .btn-info:hover {
        background-color: #138496;
    }

    .modal-backdrop {
        display: none !important;
    }

    /* Categories sidebar responsive */
    .categories-sidebar {
        margin-bottom: 30px;
    }

    @media (min-width: 992px) {
        .categories-sidebar {
            margin-bottom: 0;
        }
    }

    .category-link {
        display: block;
        padding: 12px 15px;
        margin-bottom: 8px;
        border-radius: 8px;
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
    }

    .category-link:hover {
        background-color: #f8f9fa;
        border-left-color: #28a745;
        transform: translateX(5px);
    }

    /* Products grid responsive */
    .product-card {
        margin-bottom: 25px;
        transition: transform 0.3s ease;
    }

    .product-card:hover {
        transform: translateY(-5px);
    }

    .product-card .card-img {
        height: 200px;
        object-fit: cover;
        width: 100%;
    }

    @media (min-width: 768px) {
        .product-card .card-img {
            height: 250px;
        }
    }

    .product-card .card-body {
        padding: 15px;
        text-align: center;
    }

    @media (min-width: 768px) {
        .product-card .card-body {
            padding: 20px;
        }
    }

    /* Pagination responsive */
    .pagination {
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 30px;
    }

    .page-link {
        padding: 8px 12px;
        margin: 2px;
        border-radius: 5px;
    }

    @media (min-width: 576px) {
        .page-link {
            padding: 10px 15px;
            margin: 0 3px;
        }
    }

    /* Brands section responsive */
    .brands-section {
        padding: 30px 0;
    }

    .brand-img {
        max-height: 60px;
        width: auto;
        margin: 0 auto;
    }

    .carousel-control {
        width: 30px;
        height: 30px;
        background: rgba(0,0,0,0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    @media (min-width: 768px) {
        .carousel-control {
            width: 40px;
            height: 40px;
        }
    }

    /* Text responsive */
    .responsive-text {
        font-size: 1.1rem;
        line-height: 1.6;
    }

    @media (min-width: 768px) {
        .responsive-text {
            font-size: 1rem;
        }
    }

    .responsive-heading {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    @media (min-width: 768px) {
        .responsive-heading {
            font-size: 1.75rem;
        }
    }

    @media (min-width: 992px) {
        .responsive-heading {
            font-size: 2rem;
        }
    }

    /* Product overlay for mobile */
    .product-overlay {
        background: rgba(0,0,0,0.3);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .product-card:hover .product-overlay {
        opacity: 1;
    }

    @media (max-width: 768px) {
        .product-overlay {
            opacity: 0.7;
        }
    }
</style>

<!-- Start Content -->
<div class="container py-4">
    <div class="row">
        <!-- Categories Sidebar -->
        <div class="col-lg-3 categories-sidebar">
            <h1 class="responsive-heading pb-3">{% trans "Categories" %}:</h1>
            <ul class="list-unstyled">
                {% for category in categories %}
                    <li>
                        <a class="category-link h5 text-decoration-none text-success"
                           href="{% url 'goods:categories_index' category.slug %}">
                            {{ category.name }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Products Grid -->
        <div class="col-lg-9">
            <div class="row">
                {% for product in goods %}
                <div class="col-md-6 col-lg-4">
                    <div class="card product-card rounded-0 border-0 shadow-sm">
                        <div class="position-relative">
                            <img class="card-img rounded-0" src="{{ product.image.url }}" alt="{{ product.name }}">
                            <div class="card-img-overlay rounded-0 product-overlay d-flex align-items-center justify-content-center">
                                <ul class="list-unstyled">
                                    <li>
                                        <a class="btn btn-success text-white btn-sm" href="{% url 'goods:product' product.slug %}">
                                            <i class="far fa-heart"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-body">
                            <a href="{% url 'goods:product' product.slug %}" class="h5 text-decoration-none text-dark d-block mb-2">
                                {{ product.name }}
                            </a>
                            <ul class="list-unstyled d-flex justify-content-center mb-2">
                                <li>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                </li>
                            </ul>
                            <p class="text-center mb-1 fw-bold">{{ product.price }} {% trans "som" %}</p>
                            <p class="text-center mb-3 text-success small">{{ product.get_status_display }}</p>
                            <a href="{% url 'goods:product' product.slug %}" class="btn btn-info">
                                {% trans "Learn More" %}
                            </a>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center py-5">
                    <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">{% trans "No products found" %}</h4>
                    <p class="text-muted">{% trans "Try selecting a different category or check back later." %}</p>
                </div>
                {% endfor %}
            </div>

            <!-- Pagination -->
            {% if goods.paginator.num_pages > 1 %}
            <nav aria-label="{% trans 'Products pagination' %}">
                <ul class="pagination justify-content-center">
                    {% if goods.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ goods.previous_page_number }}" aria-label="{% trans 'Previous' %}">
                                {% trans "Previous" %}
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">{% trans "Previous" %}</span>
                        </li>
                    {% endif %}

                    {% for num in goods.paginator.page_range %}
                        {% if goods.number == num %}
                            <li class="page-item active">
                                <span class="page-link">{{ num }}</span>
                            </li>
                        {% elif num > goods.number|add:"-3" and num < goods.number|add:"3" %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    {% if goods.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ goods.next_page_number }}" aria-label="{% trans 'Next' %}">
                                {% trans "Next" %}
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">{% trans "Next" %}</span>
                        </li>
                    {% endif %}
                </ul>
            </nav>
            {% endif %}
            <!-- End Pagination -->
        </div>
    </div>
</div>
<!-- End Content -->

<!-- Start Brands -->
<section class="bg-light py-4 brands-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-8 mx-auto">
                <h1 class="responsive-heading text-success mb-3">{% trans "Our Brands" %}</h1>
                <p class="responsive-text text-muted mb-4">
                    {% trans "We are proud to partner with leading brands that have earned the trust of millions of customers worldwide. Our collection combines high quality, innovative technology and stylish design so you can choose the best." %}
                </p>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="tempaltemo-carousel">
                    <div class="row d-flex align-items-center">
                        <!-- Controls -->
                        <div class="col-1 text-center">
                            <a class="carousel-control text-dark" href="#brands-carousel" role="button" data-bs-slide="prev">
                                <i class="fas fa-chevron-left"></i>
                            </a>
                        </div>
                        <!-- End Controls -->

                        <!-- Carousel -->
                        <div class="col-10">
                            <div class="carousel slide" id="brands-carousel" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    <!-- First slide -->
                                    <div class="carousel-item active">
                                        <div class="row">
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_01.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_02.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_03.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_04.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End First slide -->

                                    <!-- Second slide -->
                                    <div class="carousel-item">
                                        <div class="row">
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_01.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_02.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_03.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                            <div class="col-6 col-md-3 p-3">
                                                <img class="img-fluid brand-img" src="{% static 'assets/img/brand_04.png' %}" alt="{% trans 'Brand Logo' %}">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Second slide -->
                                </div>
                            </div>
                        </div>
                        <!-- End Carousel -->

                        <!-- Controls -->
                        <div class="col-1 text-center">
                            <a class="carousel-control text-dark" href="#brands-carousel" role="button" data-bs-slide="next">
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </div>
                        <!-- End Controls -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Brands -->

<!-- Scripts -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Mobile touch improvements
        const productCards = document.querySelectorAll('.product-card');
        productCards.forEach(card => {
            card.style.cursor = 'pointer';
            card.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.98)';
            });
            card.addEventListener('touchend', function() {
                this.style.transform = 'scale(1)';
            });
        });

        // Category links touch improvement
        const categoryLinks = document.querySelectorAll('.category-link');
        categoryLinks.forEach(link => {
            link.addEventListener('touchstart', function() {
                this.style.backgroundColor = '#e9ecef';
            });
            link.addEventListener('touchend', function() {
                this.style.backgroundColor = '';
            });
        });

        // Initialize carousel with touch support
        const carousel = document.getElementById('brands-carousel');
        if (carousel) {
            new bootstrap.Carousel(carousel, {
                touch: true,
                interval: 3000
            });
        }
    });
</script>
{% endblock %}